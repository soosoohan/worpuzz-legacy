<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì›Œí¼ì¦ˆ ìƒëª…</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #209087;
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 0;
    padding: 10px;
  }
  h1 {
    font-size: 3em;
    margin: 20px 0 10px;
    color: #EF0;
  }
  p.rule {
    margin: 0 0 10px;
    font-size: 1em;
    color: #EF0;
    text-align: center;
    line-height: 1.4;
  }
  .container {
    display: flex;
    align-items: flex-start;
    gap: 20px;
    margin-bottom: 10px;
    width: 100%;
    max-width: 800px;
    justify-content: center;
  }
  .score-container {
    display: none;
    flex-direction: column;
    gap: 10px;
    width: 95%;
    max-width: 400px;
  }
  .score-container #npcScore-mobile, 
  .score-container #userScore-mobile {
    background-color: #0E756D;
    color: #fff;
    width: 100%;
    padding: 10px;
    box-sizing: border-box;
    border-radius: 12px;
  }
  .score-container #npcScore-mobile h2,
  .score-container #userScore-mobile h2 {
    font-size: 0.9em;
    margin: 0 0 5px;
  }
  .score-container #npcScore-mobile p,
  .score-container #userScore-mobile p {
    font-size: 0.9em;
    display: inline-block;
    margin: 2px 5px;
  }
  #npcScore, #userScore {
    background-color: #0E756D;
    color: #fff;
    width: 180px;
    min-height: 300px;
    padding: 10px;
    box-sizing: border-box;
    border-radius: 12px;
    flex-shrink: 0;
  }
  #npcScore h2, #userScore h2 {
    font-size: 1.2em;
    margin-top: 0;
    margin-bottom: 10px;
  }
  #npcScore p, #userScore p {
    font-size: 1.1em;
    margin: 5px 0;
  }
  #game {
    display: grid;
    grid-template-columns: repeat(10, 1fr);
    grid-gap: 5px;
    padding: 10px;
    background-color: #0E756D;
    border-radius: 12px;
    width: 400px;
    height: 400px;
    box-sizing: border-box;
    flex-shrink: 0;
  }
  .cell {
    width: 100%;
    height: 100%;
    aspect-ratio: 1 / 1;
    background-color: #CFF9FF;
    color: #0A6A79;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.3em;
    font-weight: bold;
    cursor: pointer;
    user-select: none;
    border-radius: 4px;
  }

.revealed {
    background-color: #fff;
  }
  

  .revealed.clover {
    background-color: #d0f5d0;
    font-size: 1.5em;
  }
  .revealed.clover span {
    font-family: "Apple Color Emoji", "Segoe UI Emoji", sans-serif;
  }


.revealed.daisy {
  background-color: #fff4e0; /* ë°ì€ ë°ì´ì§€ ëŠë‚Œì˜ ë°°ê²½ */
  font-size: 1.5em;
}
.revealed.daisy span {
  font-family: "Apple Color Emoji", "Segoe UI Emoji", sans-serif;
}


  .word-owned-user {
    background-color: #fff9c4;
  }
  .word-owned-npc {
    background-color: #ffe0e0;
  }
  .btn-container {
    display: flex;
    gap: 10px;
    margin: 15px;
  }
  button {
    font-size: 1.1em;
    padding: 10px 20px;
    cursor: pointer;
    background-color: #CFF9FF;
    color: #0A6A79;
    border-radius: 12px;
    border: none;
  }
  button:hover {
    background-color: #1baf8f;
    color: #fff;
  }
  @media (max-width: 768px) {
    h1 {
      font-size: 2.5em;
      margin: 15px 0 5px;
    }
    p.rule {
      font-size: 0.9em;
      margin: 0 10px 15px;
    }
    .container {
      flex-direction: column;
      align-items: center;
      width: 100%;
    }
    #game {
      width: 95%;
      max-width: 400px;
      height: auto;
      aspect-ratio: 1 / 1;
    }
    .btn-container {
      margin: 10px;
      width: 95%;
      max-width: 400px;
      justify-content: center;
    }
    button {
      font-size: 1em;
      padding: 12px 25px;
      flex: 1;
      max-width: 150px;
    }
    .score-container {
      display: flex !important;
    }
    #npcScore, #userScore {
      display: none !important;
    }
  }
</style>
</head>
<body>

<h1>ì›Œí¼ì¦ˆ ì—¬í–‰</h1>
<p class="rule">
ê°€ë¡œâ†’, ì„¸ë¡œâ†“, ëŒ€ê°ì„ â†˜ìœ¼ë¡œ ìˆëŠ” ì‚¬ììˆ™ì–´ë¥¼ ì°¾ìœ¼ì„¸ìš”.<br>
ğŸ€ ë„¤ìí´ë¡œë²„ë¥¼ ì°¾ìœ¼ë©´ ì£¼ë³€ ìƒí•˜ì¢Œìš° ì¹¸ì´ í•¨ê»˜ ì—´ë¦¬ê³ , í•œ ë²ˆ ë” í„´ì„ ê°€ì§‘ë‹ˆë‹¤.<br>
ğŸŒ¼ ë°ì´ì§€ê½ƒì„ ì°¾ìœ¼ë©´ ëŒ€ê°ì„ ì„ í¬í•¨í•œ ì£¼ë³€ 8ì¹¸ì´ ì—´ë¦¬ë©°, ì—­ì‹œ í•œ ë²ˆ ë” í„´ì„ ê°€ì§‘ë‹ˆë‹¤.<br>

ì»´í“¨í„°ì™€ ëŒ€ê²°í•˜ì—¬ ë” ë§ì€ ë‹¨ì–´ë¥¼ ì°¾ìœ¼ë©´ ì´ê¹ë‹ˆë‹¤ !
</p>

<div class="container">
  <div id="npcScore">
    <h2>ì»´í“¨í„°:</h2>
  </div>
  <div id="game"></div>
  <div id="userScore">
    <h2>ì‚¬ìš©ì:</h2>
  </div>
</div>

<div class="score-container">
  <div id="npcScore-mobile">
    <h2>ì»´í“¨í„°:</h2>
  </div>
  <div id="userScore-mobile">
    <h2>ì‚¬ìš©ì:</h2>
  </div>
</div>

<div class="btn-container">
  <button id="retryBtn">ë‹¤ì‹œ í•˜ê¸°</button>
  <button onclick="location.href='index.html'">ì´ˆê¸° í™”ë©´</button>
</div>
<script>


const four_letter_words = ["ê°€ê²©ì¸ìƒ","ê°€ë‚´ê³µì—…","ê°€ë™ì‹œê°„","ê°€ì‚¬ì†Œì†¡","ê°€ì…ì—¬ë¶€","ê°€ì „ì œí’ˆ","ê°€ì •êµìœ¡","ê°€ì •ë²•ì›","ê°€ì •í­ë ¥","ê°€ì¡±í™”ëª©","ê°€ì¹˜íŒë‹¨","ê°ì¸ê°ìƒ‰","ê°ìë„ìƒ","ê°ì—¼í™•ì‚°","ê°ì „ì£¼ì˜","ê°•ì œì§‘í–‰","ê°•ì œí‡´ê±°","ê°œë°©ìƒíƒœ","ê°œì¸ë©´í—ˆ","ê°œì¸ì •ë³´","ê°œì¸ì°½ê³ ","ê°œì¸íƒì‹œ","ê°œì ì‹œê°„","ê±´ê°•ê´€ë¦¬","ê±´ê°•ì§„ë‹¨","ê±´ì¶•êµ¬ì¡°","ê²€ì‚¬ì™„ë£Œ","ê²°ì„ì‚¬ìœ ","ê²°ì œê¸ˆì•¡","ê²°ì œìˆ˜ë‹¨","ê²°ì œì•ˆë‚´","ê²½ê³ í‘œì§€","ê²½ë ¥ë¶ˆë¬¸","ê²½ì œë°œì „","ê³„ë‹¨ì£¼ì˜","ê³„ì•½ì²´ê²°","ê³„ì•½í•´ì§€","ê³„ì¢Œì´ì²´","ê³„ì¢Œì •ì§€","ê³ ê°ë§Œì¡±","ê³ ê°ë¶ˆë§Œ","ê³ ê°ìƒë‹´","ê³ ê°ì•ˆë‚´","ê³ ê°ì•ˆì „","ê³ ê°ì‘ëŒ€","ê³ ê°í¸ì˜","ê³ ë“±ë™ë¬¼","ê³ ë“±ë²•ì›","ê³ ë“±í•™êµ","ê³ ì†ë„ë¡œ","ê³ ìš©ë¶ˆì•ˆ","ê³ ìš©ì´‰ì§„","ê³ ì¥ì‹ ê³ ","ê³¨ë‹¤ê³µì¦","ê³µê°„ì„¤ê³„","ê³µê°„í™œìš©","ê³µê³µë³µë¦¬","ê³µê³µë¶€ë¬¸","ê³µê³µì‹œì„¤","ê³µê³µì˜ì‹","ê³µê³µì¥ì†Œ","ê³µë™ì£¼íƒ","ê³µëª…ì •ëŒ€","ê³µë¶€ì‹œê°„","ê³µì‚¬êµ¬ê°„","ê³µì†Œì‹œíš¨","ê³µì‹ë¬¸ì„œ","ê³µì¥ê°€ë™","ê³µì¤‘ì „í™”","ê³µì¤‘ì •ì›","ê³µì§€ì‚¬í•­","ê³µí•­íì‡„","ê³¼ì†ë‹¨ì†","ê³¼ì œì‹œê°„","ê³¼ì œì œì¶œ","ê´€ê³„ë¶€ì²˜","ê´€ê³„ìì™¸","ê´€ëŒì‹œê°„","ê´€ë¦¬ë¶€ì¬","êµìœ¡ê²©ì°¨","êµìœ¡ê³¼ì •","êµìœ¡ê¸°ê´€","êµìœ¡ìë£Œ","êµí†µê¸°ê´€","êµí†µë§ˆë¹„","êµí†µìƒí™©","êµí†µì‹ í˜¸","êµí†µì•½ì","êµí†µí¸ì˜","êµ¬ê¸‰í•¨ì²´","êµ¬ë§¤ë‚´ì—­","êµ¬ì‚¬ì¼ìƒ","êµ¬ì†ì˜ì¥","êµ¬í˜¸ë¬¼í’ˆ","êµ¬í˜¸ìš©í’ˆ","êµ­ê°€ê¸°ê´€","êµ­ë‚´ì—¬í–‰","êµ­ë¯¼ì—°ê¸ˆ","êµ­ì•…ê³µì—°","êµ­ì œê³µí•­","ê¶Œë¦¬ë³´í˜¸","ê¶Œëª¨ìˆ ìˆ˜","ê·œì œê°œí˜","ê·¼ë¡œê³„ì•½","ê·¼ë¡œìˆ˜ì¹™","ê·¼ë¬´íƒœë„","ê·¼ë¬´íƒœë§Œ","ê¸ˆì—°êµ¬ì—­","ê¸ˆìœµê¸°ê´€","ê¸ˆìœµì‚¬ê¸°","ê¸ˆì€ë³´ì„","ê¸ˆì§€í–‰ìœ„","ê¸ˆí’ˆìˆ˜ìˆ˜","ê¸‰ìˆ˜ì‹œì„¤","ê¸‰ì‹ì‹œê°„","ê¸°ê³„ìˆ˜ë¦¬","ê¸°ê´€ë‹¨ì²´","ê¸°ìƒì‹œê°„","ê¸°ì†Œìœ ì˜ˆ","ê¸°ì†Œì¤‘ì§€","ê¸°ìŠµê³µê²©","ê¸°ì—…ëŒ€ì¶œ","ê¸°ì—…ì •ë³´","ê¸°ì¶œë¬¸ì œ","ê¸°íšì „ì‹œ","ê¸´ê¸‰ê³µì§€","ê¸´ê¸‰êµ¬ì¡°","ê¸´ê¸‰ëŒ€í”¼","ê¸´ê¸‰ë³µêµ¬","ê¸´ê¸‰ìƒí™©","ê¸´ê¸‰ì—°ë½","ê¸´ê¸‰ì¶œë™","ê¸´ê¸‰í˜¸ì¶œ","ë‚™ì¥ë¶ˆì…","ë‚™ì°°í†µë³´","ë‚¨ë‚¨ë¶ë…€","ë‚¨ë…€ê³µí•™","ë‚¨ë…€ë…¸ì†Œ","ë‚¨ë…€ìœ ë³„","ë‚¨ì¤‘ì¼ìƒ‰","ë‚©ë¶€ì—¬ë¶€","ë‚´ê³¼ì§„ë£Œ","ë‚´ë¶€ê°ˆë“±","ë‚´ì—°ê¸°ê´€","ë…¸ë ¥ê²°ì‹¤","ë…¸ë ¥ì§‘ì¤‘","ë…¸ì‚¬í˜‘ì˜","ë…¸ì„ ë³€ê²½","ë…¸ì•½ìì„","ë…¸ì¸ë³µì§€","ë…¸ì¸ì •ì±…","ë…¸ì¡°íƒ„ì••","ë‡Œë¬¼ìˆ˜ìˆ˜","ëŠ¥ë ¥ê°œë°œ","ë‹¨ë„ì§ì…","ë‹¨ë…ì‚¬ìš©","ë‹¨ì—´ê³µì‚¬","ë‹¨ì²´ê¸‰ì‹","ëŒ€ëŒ€ì†ì†","ëŒ€ë¦¬ì‹œí—˜","ëŒ€ë¦¬ìš´ì „","ëŒ€ë¦¬ì¶œì„","ëŒ€ë§ˆë¶ˆì‚¬","ëŒ€ëª…ì²œì§€","ëŒ€ì¶œì—°ì²´","ëŒ€í”¼ê²½ë¡œ","ëŒ€í”¼ìš”ë ¹","ëŒ€í”¼ìœ ë„","ë„ë‚œë°©ì§€","ë„ë‚œì‹ ê³ ","ë„ë•ê´€ë…","ë„ì‹œì •ë¹„","ë„ì°©ì˜ˆì •","ë™ê³ ë™ë½","ë™ë¬¸ì„œë‹µ","ë™ë¬¼ë³‘ì›","ë™ë¬¼ë³´í˜¸","ë™ìƒê³µì‚¬","ë™ì„œê³ ê¸ˆ","ë™ì„œë‚¨ë¶","ë™ì„±ë™ë³¸","ë™ì‹œë‹¤ë°œ","ë“±ë¡ì—¬ë¶€","ë“±ë¡í•„ì¦","ë“±í™”ê´€ì œ","ë§ˆê°ì‹œê°„","ë§ˆê°ì„ë°•","ë§ˆì•½ì†Œì§€","ë§Œêµ­ì‹ í˜¸","ë§Œë¦¬ì¥ì²œ","ë§Œì¥ì¼ì¹˜","ë§ì†Œë“±ë¡","ë§¤ë¬¼ì ‘ìˆ˜","ë§¤ì¥ì •ë¦¬","ë©´í—ˆë°œê¸‰","ë©´íšŒê¸ˆì§€","ë©´íšŒì‹œê°„","ë©¸ì¢…ìœ„ê¸°","ëª…ì‚°ëŒ€ì²œ","ëª©í‘œë‹¬ì„±","ëª©í‘œì„¤ì •","ëª©í‘œì§‘ì¤‘","ë¬´ë‹¨ê²°ê·¼","ë¬´ë‹¨íˆ¬ê¸°","ë¬´ë‹¨íš¡ë‹¨","ë¬´ì„ìŠ¹ì°¨","ë¬¸ì„œìœ„ì¡°","ë¬¸ì„œì œì¶œ","ë¬¸ì˜ì „í™”","ë¬¸ì „ì„±ì‹œ","ë¬¼ê°€ìƒìŠ¹","ë¬¼ë¥˜ì •ì§€","ë¬¼ë¦¬í•™ì","ë¬¼í’ˆíŒë§¤","ë¯¸ë˜ì„¤ê³„","ë¯¼ê°í”¼ë¶€","ë¯¼ì‚¬ì†Œì†¡","ë¯¼ì†ë†€ì´","ë¯¼ì£¼ì£¼ì˜","ë°€íê³µê°„","ë°”ë‹¥ë§ˆê°","ë°˜í’ˆì‹ ì²­","ë°©ë¬¸ê¸ˆì§€","ë°©ë¬¸ì˜ˆì•½","ë°©ë¬¸í™˜ì˜","ë°©ì—­êµ¬ì—­","ë°©ì—­ìˆ˜ì¹™","ë°©ì—´ë‹´ìš”","ë°©ì—¼ì²˜ë¦¬","ë°°ì†¡ì‹œê°„","ë°°ìˆ˜ì‹œì„¤","ë°°ì°¨ê°„ê²©","ë°±ë…„ëŒ€ê³„","ë°±ë§ŒëŒ€êµ°","ë°±ë§Œì¥ì","ë°±ì˜ë¯¼ì¡±","ë²”ì£„ì˜ˆë°©","ë²”ì£„í–‰ìœ„","ë²•ë ¹ë‹¨ìœ„","ë²•ë¥ ê´€ë…","ë²•ë¥ ìƒë‹´","ë²•ë¥ ì„œë¥˜","ë²•ë¥ ìë¬¸","ë²•ì •ê´€ë¦¬","ë²½ì§€êµì²´","ë³„ìœ ì²œì§€","ë³‘ì—­ë©´ì œ","ë³´ê´€ê¸ˆì§€","ë³´ê´€í•¨ì²´","ë³´ì„ì²­êµ¬","ë³´ì•ˆê²€ìƒ‰","ë³´ì•ˆì·¨ì•½","ë³´ì•ˆí—ˆìˆ ","ë³´ìœ¡ì‹œì„¤","ë³´ì¡´ê¸°ë¡","ë³´í–‰ìœ ë„","ë³´í–‰í†µë¡œ","ë³´í—˜ì‚¬ê¸°","ë³´í˜¸êµ¬ì—­","ë³µë„í†µí–‰","ë³µìˆ˜ë©´í—ˆ","ë³µì•½ì§€ë„","ë³µì§€ë¶€ë™","ë³µì§€ì‚¬ê°","ë³µì§€ì •ì±…","ë³µì§€ì œë„","ë³µì§€í–¥ìƒ","ë´‰ê±´ì£¼ì˜","ë´‰ì‚¬ì •ì‹ ","ë¶€ë„ì²˜ë¦¬","ë¶€ëª¨í˜•ì œ","ë¶€ë¶„ë§ˆì·¨","ë¶€ì •í–‰ìœ„","ë¶„ë¦¬ìˆ˜ê±°","ë¶„ì–‘ê³„íš","ë¶„ì–‘ê³µê³ ","ë¶ˆë²•ì¹¨ì…","ë¹„ë‹ìš°ì‚°","ë¹„ë°€ì¡°ì§","ë¹„ë¹”êµ­ìˆ˜","ë¹„ìƒê°œë°©","ë¹„ìƒêµ¬ì—­","ë¹„ìƒëŒ€í”¼","ë¹„ìƒë²¨ì†Œ","ë¹„ìƒìƒí™©","ë¹„ìƒì•ˆì „","ë¹„ìƒìš©í’ˆ","ë¹„ìƒì „í™”","ë¹„ìƒì •ì§€","ë¹„ìƒì •ì°¨","ë¹„ìƒì¡°ëª…","ë¹„ìƒì¡°ì¹˜","ë¹„ìƒì¶œêµ¬","ë¹„ìƒì¶œì…","ë¹„ìƒí†µë¡œ","ë¹„ìƒí†µí™”","ë¹„ìƒí˜¸ì¶œ","ë¹„í–‰ê²½ë¡œ","ë¹„í–‰ì‹œê°„","ë¹„í˜¼ì£¼ì˜","ì‚¬ê³ ë°©ì§€","ì‚¬ê³ ì •ë¦¬","ì‚¬ê¸°í”¼í•´","ì‚¬ë‚´ì—°ì• ","ì‚¬ë¦¬ì‚¬ìš•","ì‚¬ë°©íŒ”ë°©","ì‚¬ìš©ê°€ëŠ¥","ì‚¬ìš©ê¸ˆì§€","ì‚¬ìš©í”ì ","ì‚¬ì „ì˜ˆì•½","ì‚¬ì „í˜‘ì˜","ì‚¬íšŒê°ˆë“±","ì‚¬íšŒê·œë²”","ì‚¬íšŒë³´ì¥","ì‚¬íšŒì•ˆì •","ì‚°ë¦¼ë³´í˜¸","ì‚°ì†Œê³µê¸‰","ì‚¼ì‚¼ì˜¤ì˜¤","ì‚¼í•œì‚¬ì˜¨","ìƒê°€ê±´ë¬¼","ìƒê°€ì…ì°°","ìƒë‹´ì‹œê°„","ìƒì„¤ì „ì‹œ","ìƒì†í¬ê¸°","ìƒí•˜ìˆ˜ë„","ìƒí•˜ì¢Œìš°","ìƒë…„ì›”ì¼","ìƒì¡´í‚¤íŠ¸","ìƒí™œê¶Œì—­","ì„œë¥˜ì ‘ìˆ˜","ì„œë¥˜ì œì¶œ","ì„œëª…ì—¬ë¶€","ì„œí–‰ìš´ì „","ì„ ì œê³µìŠµ","ì„±ê³µë¹„ê²°","ì„±ê³¼ë„ì¶œ","ì„±ì‹¬ì„±ì˜","ì„±ì¥ë™ë ¥","ì„¸ê³„í‰í™”","ì„¸ìƒë§Œì‚¬","ì„¸ì‹œí’ì†","ì„¸í¬ì¬ìƒ","ì†Œë…„ë²”ì£„","ì†Œë…„ë³´í˜¸","ì†Œë“ê³µì œ","ì†Œë§ì„±ì·¨","ì†Œë°©ì‹œì„¤","ì†Œë°©ì ê²€","ì†Œí™”ì¥ë¹„","ì†ë„ìœ„ë°˜","ìˆ˜ë„ë‹¨ìˆ˜","ìˆ˜ë¦¬ì ‘ìˆ˜","ìˆ˜ë¶„íƒ„ë ¥","ìˆ˜ì‚¬ê¸°ê´€","ìˆ˜ì—…ì‹œê°„","ìˆ˜ì§ˆì˜¤ì—¼","ìŠ¹ê¸‰ì‹¬ì‚¬","ìŠ¹ì¸ê¸°ê°„","ìŠ¹ì¸ëŒ€ê¸°","ìŠ¹ì¸ì—¬ë¶€","ìŠ¹ì°¨ì—¬ë¶€","ìŠ¹ì°¨ì§ˆì„œ","ì‹œê°„ê´€ë¦¬","ì‹œê°„ë¬¸ì œ","ì‹œê°„ì—„ìˆ˜","ì‹œê°„ì œí•œ","ì‹œê³„ìˆ˜ë¦¬","ì‹œê³µì™„ë£Œ","ì‹œë¯¼ì‚¬íšŒ","ì‹œì„¤ë³´ìˆ˜","ì‹œì„¤ì•ˆì „","ì‹œì„¤ì„ëŒ€","ì‹œì„¤ì ê²€","ì‹œí–‰ì°©ì˜¤","ì‹œí—˜ë²”ìœ„","ì‹œí—˜í•©ê²©","ì‹ì‚¬ì‹œê°„","ì‹ ë¬¸ê¸°ì","ì‹ ì†ë°°ë‹¬","ì‹ ìš©ë“±ê¸‰","ì‹ ìš©ë¶ˆëŸ‰","ì‹ ìš©ì¹´ë“œ","ì‹ ì›ì¡°íšŒ","ì‹ ì¥ì´ì‹","ì‹ ì²­ê¸°ê°„","ì‹ ì²´ê²€ì‚¬","ì‹ í˜¸ìœ„ë°˜","ì‹¤ë‚´ì¥ì‹","ì‹¤ìš©í•œì","ì‹¤ì¢…ì‹ ê³ ","ì‹¬ë¦¬ë¶ˆì•ˆ","ì‹¬ì¥ì´ì‹","ì•„ë™í•™ëŒ€","ì•„ì—­ë°°ìš°","ì•ˆì „ê¸°ì¤€","ì•ˆì „ìˆ˜ì¹™","ì•ˆì „ì‹œì„¤","ì•ˆì „ìš”ì›","ì•ˆì „ì ê²€","ì•ˆì „ì œì¼","ì•ˆì „ì¡°ì¹˜","ì•ˆì „í–‰ë™","ì• êµ­ì• ì¡±","ì•¼ê°„ì§„ë£Œ","ì•¼ìƒë™ë¬¼","ì•½ëƒ‰ë°©ì¹¸","ì•½ì†ì¤€ìˆ˜","ì•½ìë°°ë ¤","ì•½í’ˆë¶€ì¡±","ì–¸ì–´ê°ê°","ì—…ë¬´ë§ˆê°","ì—…ë¬´ë§ˆë¹„","ì—…ë¬´ë³´ê³ ","ì—…ë¬´ì‹œê°„","ì—…ë¬´ì •ì§€","ì—¬ê°ì—´ì°¨","ì—¬ê°ìš´ì†¡","ì—°ê°€ì‹ ì²­","ì—°ë£Œì¥ì¹˜","ì—°ë¦½ì£¼íƒ","ì—°ì¤‘í–‰ì‚¬","ì—´ì„ êµ¬ê°„","ì—´ì •ì¶©ë§Œ","ì—´ì°¨ìš´í–‰","ì—´ì°¨ì§€ì—°","ì˜ì—…ì‹œê°„","ì˜ì—…ì¤‘ë‹¨","ì˜ˆì‚°ì‚­ê°","ì˜¥ìƒì¶œì…","ì™„ì¶©ì¥ì¹˜","ì™•ê¶Œë¶„ë¦½","ì™¸ë˜ì ‘ìˆ˜","ì™¸ë¶€ìŒì‹","ì™¸ì¶œê¸ˆì§€","ìš”ê¸ˆë¶€ê³¼","ìš”ê¸ˆì¸ìƒ","ìš°ì„ ì§€ì›","ìš°ì„ íƒ‘ìŠ¹","ìš°ì™•ì¢Œì™•","ìš°ì£¼ì—¬í–‰","ìš°ì¸¡ë³´í–‰","ìš°ì¸¡í†µí–‰","ìš°íšŒë„ë¡œ","ìš´ë™ê²½ê¸°","ìš´ì†¡ê¸°ê´€","ìš´ì˜ì‹œê°„","ìš´ì˜ì…ì°°","ìš´ì˜ì •ì±…","ìš´ì „ë©´í—ˆ","ìš´í–‰ê¸ˆì§€","ìš´í–‰ì‹œê°„","ìš´í–‰ì¤‘ë‹¨","ìœ„ê¸°ìƒí™©","ìœ„ê¸°íˆ¬í•©","ìœ„ìƒê´€ë…","ìœ„ì„ì¡°ë¬¸","ìœ„íƒíŒë§¤","ìœ„í—˜ê²½ê³ ","ìœ„í—˜ì£¼ì˜","ìœ„í—˜ì§€ì—­","ìœ ì•„ë™ë°˜","ìœ í†µê¸°í•œ","ìœ íš¨ìˆ«ì","ìœ¡ì‹ë™ë¬¼","ìœ¤ë¦¬ê´€ë…","ìœ¤ë¦¬ì†Œë¹„","ìŒì£¼ìš´ì „","ì‘ê¸‰ì¡°ì¹˜","ì‘ê¸‰ì²˜ì¹˜","ì‘ì‹œì—¬ë¶€","ì˜ê¸°ì†Œì¹¨","ì˜ê¸°íˆ¬í•©","ì˜ë£Œê¸°ê¸°","ì˜ë£Œì§€ì›","ì˜ì•½ë¶„ë¥˜","ì´êµ¬ë™ì„±","ì´ìš©ì•ˆë‚´","ì´ìš©ì•½ê´€","ì´ìš©ì œí•œ","ì´ì¸ì‚¼ê°","ì´ì§ì¤€ë¹„","ì¸ê°„ê´€ê³„","ì¸ê¶Œì¹¨í•´","ì¸ì‚°ì¸í•´","ì¸ìš©ì¡°ë¬¸","ì¸ì›ì¶•ì†Œ","ì¸ì ìì›","ì¸í•´ì „ìˆ ","ì¼ê±°ì–‘ë“","ì¼ê¸‰ê¸°ë°€","ì¼ë¬¸ì¼ë‹µ","ì¼ë°©í†µí–‰","ì¼ì„ì´ì¡°","ì¼ì‹œì •ì§€","ì…ì‚¬ì„œë¥˜","ì…ì‚¬ì‹œí—˜","ì…ì ì‹ ì²­","ì…ì ì—…ì²´","ì…ì£¼ì²­ì†Œ","ì…ì°°ê³µê³ ","ìê²©ìš”ê±´","ìê²©ì·¨ë“","ìê¸‰ìì¡±","ìê¸°ê³„ë°œ","ìê¸°ì¸ì¦","ìë™ê²°ì œ","ìë¬¸ìë‹µ","ìì‚°ê´€ë¦¬","ììƒì‹ë¬¼","ììˆ˜ì„±ê°€","ìì•„ì‹¤í˜„","ìì›ë´‰ì‚¬","ììœ ìì¬","ììœ¨ì£¼í–‰","ìì¹˜ê²½ì°°","ìì¹˜ë‹¨ì²´","ìí¬ìê¸°","ìí™”ìì°¬","ì‘ì„±ìš”ë ¹","ì ê¸ˆí•´ì œ","ì¥ì• ì¸ì„","ì¬ê³ ë¶€ì¡±","ì¬ë‚œëŒ€ì‘","ì¬ë‚œë°©ì†¡","ì¬ë‚œì§€ì›","ì¬ì‚°ëª°ìˆ˜","ì €ì†ìš´ì „","ì ì¬ì ì†Œ","ì „êµ­ì •ì²´","ì „ê¸°ê²€ì¹¨","ì „ê¸°ê³µì‚¬","ì „ë ¥ì§ˆì£¼","ì „ë ¥íˆ¬êµ¬","ì „ë³´ì¡°ì¹˜","ì „ì‚°ë§ˆë¹„","ì „ì‹ ë§ˆì·¨","ì „ì‹¬ì „ë ¥","ì „ìë‹´ë°°","ì „ìë§¤ì²´","ì „ììˆ˜ë¦¬","ì „ìì¥ì¹˜","ì „í†µê°€ì˜¥","ì „í†µê´€ë…","ì „í†µë¬´ìš©","ì „í†µë¬¸í™”","ì „í†µì‹œì¥","ì „í†µìŒì‹","ì „í†µì˜ìƒ","ì „í™”ìƒë‹´","ì ê²€ì™„ë£Œ","ì ì‹¬ì‹œê°„","ì ‘ê·¼ê¸ˆì§€","ì ‘ìˆ˜ë§ˆê°","ì ‘ìˆ˜ì‹œê°„","ì ‘ìˆ˜ì™„ë£Œ","ì •ë…„í‡´ì§","ì •ë³´ìœ ì¶œ","ì •ë¶€ê¸°ê´€","ì •ìƒê·¼ë¬´","ì •ìƒì§„ë£Œ","ì •ì‹œì¶œê·¼","ì •ì‹ ì§ˆí™˜","ì •ì‹ ì§‘ì¤‘","ì •ì „ì‚¬ê³ ","ì •ì§ì„±ì‹¤","ì •ì°¨ê¸ˆì§€","ì •ì°¨ìœ„ë°˜","ì •ì°¨ìœ„ì¹˜","ì •í’ˆì¸ì¦","ì •í’ˆí™•ì¸","ì œë™ì¥ì¹˜","ì œì‘ê²°í•¨","ì œì¶œì—¬ë¶€","ì œí•œì†ë„","ì¡°ëª…ì„¤ì¹˜","ì¡°í–¥ì¥ì¹˜","ì¢…ì´ë´‰íˆ¬","ì¢…í•©ì•ˆë‚´","ì¢Œì¸¡í†µí–‰","ì£¼ê²½ì•¼ë…","ì£¼ë¯¼ì„¼í„°","ì£¼ë¯¼íˆ¬í‘œ","ì£¼ì‹ê±°ë˜","ì£¼ì˜ì‚¬í•­","ì£¼ì°¨êµ¬ì—­","ì£¼ì°¨ê¸ˆì§€","ì£¼ì°¨ì‹œê°„","ì£¼ì°¨ì§€ì›","ì£¼íƒë‹¨ì§€","ì£¼í–‰ì¥ì¹˜","ì¤‘ê³ ê±°ë˜","ì¤‘ê³ ì„œì ","ì¤‘ë„í¬ê¸°","ì¤‘ì¦ì¥ì• ","ì¤‘í™˜ìì‹¤","ì¦ê±°ì‚¬ì§„","ì§€ê°ì‚¬ìœ ","ì§€ê¸‰ë¶ˆëŠ¥","ì§€ê¸‰ì™„ë£Œ","ì§€ê¸‰ì •ì§€","ì§€ë°©ë²•ì›","ì§€ë°©ìì¹˜","ì§€ë°©ì •ë¶€","ì§€ë¶ˆìˆ˜ë‹¨","ì§€ìƒì²œêµ­","ì§€ì‹ê¸°ë¶€","ì§€ì—­ê°œë°œ","ì§€ì—­ê²½ì œ","ì§€ì—­ì‚¬íšŒ","ì§€ì—­ì£¼ë¯¼","ì§€ì—­í™”í","ì§€ì •ì¢Œì„","ì§€ì§„ê²½ë³´","ì§€ì§„ëŒ€í”¼","ì§€í•˜ê³µê°„","ì§€í•˜ë³´ë„","ì§€í•˜ì°¨ë„","ì§€í•˜ì°¨ì›","ì§€í•˜ì² ì—­","ì§ë¬´ì •ì§€","ì§ì›ëª¨ì§‘","ì§ì¥ê°ˆë“±","ì§ì¥ë³µê·€","ì§„ë¡œíƒìƒ‰","ì§„ë£Œê³¼ëª©","ì§„ë£Œì‹œê°„","ì§„ì‹¬ì„±ì˜","ì§„ì—´ìƒí’ˆ","ì§„ì…ê¸ˆì§€","ì°¨ë‚´ë°©ì†¡","ì°¨ëŸ‰ì •ì²´","ì°¨ëŸ‰í†µì œ","ì°¸ì„ì—¬ë¶€","ì±„ê¶Œì¶”ì‹¬","ì±„ë¬´ì¡°ì •","ì±„ì‹ì£¼ì˜","ì²˜ë¦¬ì¤‘ë‹¨","ì²˜ë°©ì¡°ì œ","ì²œë§Œë‹¤í–‰","ì²œì •ë„ë°°","ì² ë„ì°¨ëŸ‰","ì²­ë…„ì‹¤ì—…","ì²­ë ¥ê²€ì‚¬","ì²­ë ´ê²°ë°±","ì´ˆë“±í•™êµ","ì´ˆë³´ìš´ì „","ì´ˆì‹ë™ë¬¼","ì´‰ë²•ì†Œë…„","ì´¬ì˜ê¸ˆì§€","ì´¬ì˜ë²”ìœ„","ì´¬ì˜ì‹œê°„","ìµœì‹ ê¸°ì‚¬","ìµœì¢…ë©´ì ‘","ìµœì¢…ë³´ê³ ","ìµœì¢…ìŠ¹ì¸","ì¶”ì›”ê¸ˆì§€","ì¶˜í•˜ì¶”ë™","ì¶œê²°ì—¬ë¶€","ì¶œêµ¬ì „ëµ","ì¶œê·¼ëŒ€ë€","ì¶œê·¼ì‹œê°„","ì¶œê·¼ì „ìŸ","ì¶œì‚°ì¥ë ¤","ì¶œì…ê¸ˆì§€","ì¶œì…ì œí•œ","ì¶œì…ì£¼ì˜","ì¶œì…í†µì œ","ì¶©ì „ê¸ˆì•¡","ì·¨ì•½ê³„ì¸µ","ì·¨ì•½ì‹œì„¤","ì·¨ì•½ì§€ì—­","ì·¨ì—…ê·œì¹™","ì·¨ì—…ì¤€ë¹„","ì·¨ì¹¨ì‹œê°„","ì¹˜ì•„êµì •","íƒìƒê³µë¡ ","íƒìƒí–‰ì •","íƒ„ìˆ˜í™”ë¬¼","í† ëª©ê³µì‚¬","í†µí•™ì‹œê°„","í†µí–‰ê¸ˆì§€","í‡´ê·¼ì‹œê°„","í‡´ì‚¬ì²˜ë¦¬","í‡´ì§ì—°ê¸ˆ","íŠ¹ë³„í™œë™","íŠ¹ì´ì²´ì§ˆ","íŠ¹ì •ê¸°ê´€","íŠ¹ì •ì§ˆí™˜","íŒŒì‚°ì„ ê³ ","íŒŒì‚°ì‹ ì²­","íŒë§¤ê¸ˆì§€","íŒ”ë„ê°•ì‚°","íŒ”ë°©ë¯¸ì¸","í¸ì˜ì‹œì„¤","í¸ìµì¦ì§„","íì‡„êµ¬ì—­","íì ì‹œê°„","í­ë ¥ì‚¬ê±´","í­í–‰ì‚¬ê±´","í’ˆì§ˆë³´ì¦","í”¼ë‚œê³„ë‹¨","í”¼ë‚œìœ ë„","í”¼ë¶€ë°˜ì‘","í”¼ë¶€ì§ˆí™˜","í”¼í•´ë³´ìƒ","í•˜ë“±ë™ë¬¼","í•˜ìë³´ìˆ˜","í•™ë ¥ë¶ˆë¬¸","í•™ì‚¬ê²½ê³ ","í•™ìŠµíš¨ê³¼","í•™ì—…ì„±ì·¨","í•™ìœ„ì·¨ë“","í•œë„ì´ˆê³¼","í•­ì˜ë°©ë¬¸","í•´ê³ í†µë³´","í•´ì™¸ì—¬í–‰","í–‰ë°©ë¶ˆëª…","í–‰ë³µì¶”êµ¬","í–‰ì •êµ¬ì—­","í–‰ì •ëª…ë ¹","í–‰ì •ì ˆì°¨","í–‰ì •ì²˜ë¶„","í˜„ê¸ˆê²°ì œ","í˜„ê¸ˆì˜ìˆ˜","í˜„ì—­ì…ëŒ€","í˜„ì¥í™•ì¸","í˜‘ë ¥ì—…ì²´","í˜‘ì•½ì²´ê²°","í˜•ì‚¬ì²˜ë²Œ","í˜•í˜•ìƒ‰ìƒ‰","í™ë™ë°±ì„œ","í™”ê¸°ì• ì• ","í™”ìƒì—°ê²°","í™”ì¬ê²½ë³´","í™”ì¬ëŒ€í”¼","í™”ì¬ì˜ˆë°©","í™”ì¬ì£¼ì˜","í™•ì¸í•„ìš”","í™˜ê²½ë³´í˜¸","í™˜ê²½ì·¨ì•½","í™˜ê¸°ì„¤ë¹„","í™˜ë¶ˆê¸ˆì•¡","í™˜ë¶ˆì•ˆë‚´","í™˜ìŠ¹í†µë¡œ","í™˜ìŠ¹í• ì¸","íšŒì˜ì‹œê°„","íš¡ë‹¨ë³´ë„","í›„ì›ê¸°ê´€","íœ´ê°€ê¸°ê°„","íœ´ê°•ì•ˆë‚´","íœ´ê²Œì‹œê°„","íœ´ë¬´ì¼ì","íœ´ì‹ì‹œê°„","í¡ì—°êµ¬ì—­","í¡ì—°ê¸ˆì§€",

];

const five_or_more_letter_words = ["ë¬´í˜•ë¬¸í™”ì¬","ë°©ë…ë§ˆìŠ¤í¬","ìœ ì „ìë³€í˜•","ê°€ì„ë°©ì‹¬ì‚¬","ê°€ì••ë¥˜ì‹ ì²­","ê²°ì„ê³„ì œì¶œ","ê³ ë ¹í™”ì‚¬íšŒ","ê³µì¥ì‹ì¶•ì‚°","êµ¬í˜¸ë¬¼í’ˆí•¨","ëŒ€í”¼ìœ ë„ë“±","ë„ë¡œêµí†µë²•","ë¬´í˜•ë¬¸í™”ì¬","ë¯¸ë„ëŸ¼ì£¼ì˜","ë¯¼ë°©ê³µí›ˆë ¨","ë°©ë…ë§ˆìŠ¤í¬","ë²ˆí˜¸í‘œë°œê¸‰","ë³´í˜¸ìë™í–‰","ë¶ˆê¸°ì†Œì²˜ë¶„","ë¹„ìƒì¡°ëª…ë“±","ë¹„ìƒí™•ì„±ê¸°","ë¹„ì˜ë¦¬ë‹¨ì²´","ì‚¬ìƒí™œì¹¨í•´","ì‚¬ì´ë²„ë²”ì£„","ì‚°ì†Œê³µê¸‰ê¸°","ìƒí’ˆê¶Œêµ¬ë§¤","ìƒí™œë¹„ì••ë°•","ì„œë¹„ìŠ¤ì•ˆë‚´","ì„œë¹„ìŠ¤ì¤‘ë‹¨","ì„±í¬ë¡±ê¸ˆì§€","ìŠ¹ì°¨ê¶Œë°œë§¤","ì‹ ë¶„ì¦ì§€ì°¸","ì•ˆì „ë¶ˆê°ì¦","ì—­ì‚¬ë‚´ë§¤ì ","ìœ ì „ìë³€í˜•","ì‘ê¸‰ì˜ì•½í’ˆ","ì¸ì¦ì„œë°œê¸‰","ì…ì£¼ë¯¼ì „ìš©","ìë™ì°¨ê´€ë¦¬","ì¬ê°œë°œêµ¬ì—­","ì „ìš©ì¶œì…êµ¬","ì£¼ì •ì°¨ê¸ˆì§€","ì¦ê±°ë¶ˆì¶©ë¶„","ì§€ìì²´ëª…ë‹¨","ì§€í•˜ì£¼ì°¨ì¥","ì§€í•˜ì² í™”ì¬","ì§•ê³„ìœ„ì›íšŒ","ì°¨ë‚´ì†Œì§€í’ˆ","ì±„ë¬´ë¶ˆì´í–‰","ì²­ì†Œë…„ë²”ì£„","ì²­ì†Œë…„ë³´í˜¸","í™”ìƒë°©í›ˆë ¨","ì¬ê°œë°œêµ¬ì—­","ì°¨ë‚´ì†Œì§€í’ˆ","ë„ë¡œêµí†µë²•","ë¯¸ë„ëŸ¼ì£¼ì˜","ì‹ ë¶„ì¦ì§€ì°¸","ìë™ì°¨ê´€ë¦¬","ì£¼ì •ì°¨ê¸ˆì§€","ì²­ì†Œë…„ë²”ì£„","ë¯¼ë°©ê³µí›ˆë ¨","ë¹„ì˜ë¦¬ë‹¨ì²´","ì¡°ì§í­ë ¥ë°°","êµ¬í˜¸ë¬¼í’ˆí•¨","ë°©ë…ë§ˆìŠ¤í¬","ë¹„ìƒì¡°ëª…ë“±","ë¹„ìƒí™•ì„±ê¸°","ì•ˆì „ë¶ˆê°ì¦","ì‘ê¸‰ì˜ì•½í’ˆ","ì§€ìì²´ëª…ë‹¨","í™”ìƒë°©í›ˆë ¨","ì„œë¹„ìŠ¤ì¤‘ë‹¨","ì…ì£¼ë¯¼ì „ìš©","ì „ìš©ì¶œì…êµ¬","ì§€í•˜ì£¼ì°¨ì¥","í™”ìƒë°©í›ˆë ¨","ë³´í˜¸ìë™í–‰","ì¦ê±°ë¶ˆì¶©ë¶„","ì§•ê³„ìœ„ì›íšŒ","ì‚¬ìƒí™œì¹¨í•´","ìƒí™œë¹„ì••ë°•","ì§€í•˜ì² í™”ì¬","ìƒí’ˆê¶Œêµ¬ë§¤","ì„œë¹„ìŠ¤ì•ˆë‚´","ìŠ¹ì°¨ê¶Œë°œë§¤","ì—­ì‚¬ë‚´ë§¤ì ","ì¸ì¦ì„œë°œê¸‰","ê°€ì„ë°©ì‹¬ì‚¬","ê°€ì••ë¥˜ì‹ ì²­","ê³ ë ¹í™”ì‚¬íšŒ","ë¶ˆê¸°ì†Œì²˜ë¶„","ì‚¬ìƒí™œì¹¨í•´","ì‚¬ì´ë²„ë²”ì£„","ì„±í¬ë¡±ê¸ˆì§€","ì‹ ë¶„ì¦ì§€ì°¸","ì±„ë¬´ë¶ˆì´í–‰","ì²­ì†Œë…„ë³´í˜¸","ë¯¸ì™„ì„±ìë™ì°¨","ë™ë ¥ë°œìƒì¥ì¹˜","ë™ë ¥ì „ë‹¬ì¥ì¹˜","ë¯¸ì™„ì„±ìë™ì°¨","ë™ë ¥ë°œìƒì¥ì¹˜","ë™ë ¥ì „ë‹¬ì¥ì¹˜",
];


// ê° ê¸¸ì´ë³„ ë‹¨ì–´ ê°œìˆ˜ ì„¤ì •
const num_four = 11;
const num_five_or_more = 2;

const gridSize = 10;
const totalCells = gridSize * gridSize;
let board, revealed, wordMap, foundWords, currentPlayer, foundBy, words, usedIndexes;
let resultShown = false;
let clovers = new Set();
let daisies = new Set(); // ğŸŒ¼ ë°ì´ì§€ Set ì¶”ê°€
let npcTimeoutId = null;



const gameEl = document.getElementById('game');
const userScoreEl = document.getElementById('userScore');
const npcScoreEl = document.getElementById('npcScore');
const userScoreMobileEl = document.getElementById('userScore-mobile');
const npcScoreMobileEl = document.getElementById('npcScore-mobile');
const retryBtn = document.getElementById('retryBtn');

function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
}

function getRandomSample(array, count) {
  const shuffled = [...array];
  shuffle(shuffled);
  return shuffled.slice(0, Math.min(count, array.length));
}

function getRandomWords() {
  let selectedWords = []
    .concat(getRandomSample(four_letter_words, num_four))
    .concat(getRandomSample(five_or_more_letter_words, num_five_or_more));
  shuffle(selectedWords);
  return selectedWords;
}

function getRandomDirection() {
  const dirs = [{ x: 1, y: 0 }, { x: 0, y: 1 }, { x: 1, y: 1 }];
  return dirs[Math.floor(Math.random() * dirs.length)];
}

function canPlaceWord(word, x, y, dx, dy) {
  for (let i = 0; i < word.length; i++) {
    let nx = x + dx * i;
    let ny = y + dy * i;
    if (nx < 0 || ny < 0 || nx >= gridSize || ny >= gridSize) return false;
    let index = ny * gridSize + nx;
    if (board[index] && board[index] !== word[i]) return false;
    if (usedIndexes.has(index)) return false;
  }
  return true;
}

function placeWord(word) {
  for (let attempt = 0; attempt < 100; attempt++) {
    let dir = getRandomDirection();
    let x = Math.floor(Math.random() * gridSize);
    let y = Math.floor(Math.random() * gridSize);
    if (canPlaceWord(word, x, y, dir.x, dir.y)) {
      let positions = [];
      for (let i = 0; i < word.length; i++) {
        let nx = x + dir.x * i;
        let ny = y + dir.y * i;
        let idx = ny * gridSize + nx;
        board[idx] = word[i];
        usedIndexes.add(idx);
        positions.push(idx);
      }
      wordMap[word] = positions;
      return true;
    }
  }
  return false;
}

function placeClovers(count) {
  clovers.clear();
  while (clovers.size < count) {
    const idx = Math.floor(Math.random() * totalCells);
    if (!usedIndexes.has(idx)) clovers.add(idx);
  }
}

function placeDaisy() {
  daisies.clear();
  while (daisies.size < 1) { // ë°ì´ì§€ëŠ” í•˜ë‚˜ë§Œ
    const idx = Math.floor(Math.random() * totalCells);
    if (!usedIndexes.has(idx) && !clovers.has(idx)) {
      daisies.add(idx);
    }
  }
}

function fillEmptyCells() {

const filler = 'ê°€ê°ê°„ê°’ê°™ê°›ê°œê±°ê±´ê±¸ê²€ê²ƒê²Œê³ê³ ê³¨ê³µê´´êµêµ¬êµ­ê¶ê·¸ê·¼ê¸€ê¸ˆê¸°ê¸´ê¸¸ê¹Œê¹œê¹¨êº¾ê»´ê¼¼ê½ê¾¸ë”ë‚˜ë‚œë‚ ë‚®ë‚¯ë‚´ë„˜ë„£ë„¤ë…„ë†€ë†ˆëˆ„ëˆˆë‰´ëŠ”ë‹ˆë‹˜ë‹¤ë‹¥ë‹¬ë‹´ëŒ€ëŒ„ë”ë˜ë©ë°ë„ë™ë‘ë“œë“ë“ ë“£ë“¤ë“±ë””ë”œë”±ë•Œë•¡ë˜‘ëš«ë›°ë¼ë½ë€ëŒëë‘ë˜ëœëŸ¬ë ˆë ¤ë ¥ë ¸ë¡œë¡­ë¥´ë¥¸ë¥¼ë¦¬ë¦°ë¦¼ë§ˆë§‰ë§Œë§ë§˜ë§›ë§ë§¤ë§¨ë¨¸ë¨¹ë¨¼ë©€ë©‹ë©”ë©˜ë©°ë©´ëª¨ëª©ëª°ë¬´ë¬¸ë¬»ë¬¼ë­˜ë¯¸ë¯¼ë°€ë°”ë°•ë°˜ë°›ë°œë°¤ë°¥ë°©ë±…ë²„ë²…ë²ˆë²•ë²¼ë³„ë³´ë³µë³¼ë´ë´¤ë¶€ë¶ë¶„ë¶ˆë¶™ë¸Œë¸”ë¹„ë¹ˆë¹Œë¹”ë¹›ë¹ ë¹¡ë¹¨ë¹¼ë»¥ë¿”ì‚¬ì‚´ìƒìƒˆìƒ‰ìƒì„œì„ ì„¬ì„­ì„°ì„¸ì…‹ì†Œì†ì†œìˆ˜ìˆ™ìˆœìˆ²ì‰¬ìŠ´ì‹œì‹ ì‹¤ì‹¶ìŒì“°ì”Œì”»ì•„ì•…ì•ˆì•Œì•˜ì•ì• ì•¼ì–‘ì–´ì–¼ì—„ì—…ì—†ì—ˆì—‰ì—ì—¬ì—´ì˜ì˜›ì˜¤ì˜¨ì˜¬ì˜´ì˜·ì˜¹ì™€ì™”ì™œìš°ìš´ìš¸ì›ìœ„ìœ ìœ¤ìœ¼ì€ì„ìŒì˜ì´ìµì¸ì¼ìƒì„ì…ìˆìŠìì‘ì–ì˜ì¥ì¬ì €ì ì „ì •ì œì ¸ì¡¸ì¢€ì¢‹ì£¼ì¤„ì¤‘ì¤¬ì§€ì§„ì§‘ì§œì§ì°ì°¨ì°©ì°¸ì°½ì±„ì±…ì²™ì²œì²­ì²´ì³¤ì´ˆì´Œì¶œì·„ì·¨ì¹˜ì¹œì¹´ì¼œì½”ì½œí¬í°í…Œí† íŠ¸íŠ¼íŒŒíŒí­í¼í•€í•„í•˜í•™í•œí• í•´í–„í–ˆí–‰í˜„í˜•í˜¸í˜¼í™”í™˜íˆí˜'.split('');
  
  shuffle(filler);
  let iFiller = 0;
  for (let i = 0; i < totalCells; i++) {
    if (!board[i] && !clovers.has(i) && !daisies.has(i)) {
  board[i] = filler[iFiller++ % filler.length];
}
  }
}

   
function updateScore() {
  const userContent = "<h2>ì‚¬ìš©ì:</h2>" + foundBy.user.map(w => `<p>${w}</p>`).join("");
  const npcContent = "<h2>ì»´í“¨í„°:</h2>" + foundBy.npc.map(w => `<p>${w}</p>`).join("");
  userScoreEl.innerHTML = userContent;
  npcScoreEl.innerHTML = npcContent;
  if (userScoreMobileEl && npcScoreMobileEl) {
    userScoreMobileEl.innerHTML = userContent;
    npcScoreMobileEl.innerHTML = npcContent;
  }
}

function checkWords() {
  for (let word of words) {
    if (foundWords.has(word)) continue;
    const positions = wordMap[word];
    if (positions.every(i => revealed[i])) {
      foundWords.add(word);
      const owner = currentPlayer === 'user' ? 'user' : 'npc';
      foundBy[owner].push(word);
      positions.forEach(i => gameEl.children[i].classList.add(owner === 'user' ? 'word-owned-user' : 'word-owned-npc'));
      updateScore();
    }
  }
  if (foundWords.size === words.length && !resultShown) {
    resultShown = true;
    clearTimeout(npcTimeoutId);
    const userCount = foundBy.user.length;
    const npcCount = foundBy.npc.length;
    let userMessage = '';
    let npcMessage = '';
    if (userCount > npcCount) {
      userMessage = "<span style='font-family:\"Apple Color Emoji\", \"Segoe UI Emoji\", sans-serif;'>ğŸ†</span> [ìŠ¹ë¦¬!!]";
      npcMessage = "<span style='font-family:\"Apple Color Emoji\", \"Segoe UI Emoji\", sans-serif;'>ğŸ¥ˆ</span> [íŒ¨ë°°~]";
    } else {
      userMessage = "<span style='font-family:\"Apple Color Emoji\", \"Segoe UI Emoji\", sans-serif;'>ğŸ¥ˆ</span> [íŒ¨ë°°~]";
      npcMessage = "<span style='font-family:\"Apple Color Emoji\", \"Segoe UI Emoji\", sans-serif;'>ğŸ†</span> [ìŠ¹ë¦¬!!]";
    }
 

    if (userMessage && npcMessage) {
      userScoreEl.innerHTML += `<p style='font-size:1.3em; margin-top:10px; color:#FFD700; font-weight:bold;'>${userMessage}</p>`;
      npcScoreEl.innerHTML += `<p style='font-size:1.3em; margin-top:10px; color:#FFD700; font-weight:bold;'>${npcMessage}</p>`;
      if (userScoreMobileEl && npcScoreMobileEl) {
        userScoreMobileEl.innerHTML += `<p style='font-size:1.1em; margin-top:10px; color:#FFD700; font-weight:bold;'>${userMessage}</p>`;
        npcScoreMobileEl.innerHTML += `<p style='font-size:1.1em; margin-top:10px; color:#FFD700; font-weight:bold;'>${npcMessage}</p>`;
      }
    }
  }
}

function reveal(index) {
  if (revealed[index]) return;
  revealed[index] = true;
  const cell = gameEl.children[index];
  cell.classList.add('revealed');
  cell.textContent = board[index];
}

function switchTurn() {
  if (resultShown) return;
  currentPlayer = currentPlayer === 'user' ? 'npc' : 'user';
  if (currentPlayer === 'npc') {
    npcTimeoutId = setTimeout(npcTurn, 800);
  }
}

function npcTurn() {
  if (resultShown || currentPlayer !== 'npc') return;
  const options = revealed.reduce((acc, r, i) => (!r ? [...acc, i] : acc), []);
  if (options.length === 0) return;
  const choice = options[Math.floor(Math.random() * options.length)];
  handleClick(choice);
}

function handleClick(index) {
  if (revealed[index] || resultShown) return;
  let wasClover = false;
  let wasDaisy = false;

  const cell = gameEl.children[index];

  if (clovers.has(index)) {
    wasClover = true;
    cell.classList.add('revealed', 'clover');
    cell.innerHTML = '<span>ğŸ€</span>';
    revealed[index] = true;

    const dx = [0, 0, -1, 1, 0];
    const dy = [-1, 1, 0, 0, 0];

    for (let d = 0; d < dx.length; d++) {
      const nx = index % gridSize + dx[d];
      const ny = Math.floor(index / gridSize) + dy[d];
      if (nx >= 0 && nx < gridSize && ny >= 0 && ny < gridSize) {
        const nIdx = ny * gridSize + nx;
        reveal(nIdx);
      }
    }

  } else if (daisies.has(index)) {
    wasDaisy = true;
    cell.classList.add('revealed', 'daisy');
    cell.innerHTML = '<span>ğŸŒ¼</span>';
    revealed[index] = true;

    for (let dx = -1; dx <= 1; dx++) {
      for (let dy = -1; dy <= 1; dy++) {
        const nx = index % gridSize + dx;
        const ny = Math.floor(index / gridSize) + dy;
        if (nx >= 0 && nx < gridSize && ny >= 0 && ny < gridSize) {
          const nIdx = ny * gridSize + nx;
          reveal(nIdx);
        }
      }
    }

  } else {
    reveal(index);
  }

  checkWords();

  if ((!wasClover && !wasDaisy) && !resultShown) {
    switchTurn();
  } else if ((wasClover || wasDaisy) && currentPlayer === 'npc' && !resultShown) {
    npcTimeoutId = setTimeout(npcTurn, 800);
  }
}

  
function init() {
  clearTimeout(npcTimeoutId);
  board = Array(totalCells).fill(null);
  revealed = Array(totalCells).fill(false);
  wordMap = {};
  foundWords = new Set();
  foundBy = { user: [], npc: [] };
  currentPlayer = 'user';
  usedIndexes = new Set();
  words = getRandomWords();
  resultShown = false;
  clovers.clear();
daisies.clear()
  let placedWords = 0;
  let attempts = 0;
  while (placedWords < words.length && attempts < 50) {
    if (placeWord(words[placedWords])) placedWords++;
    attempts++;
  }
  words = words.slice(0, placedWords);

  placeClovers(5);
placeDaisy(1); 
  fillEmptyCells();
  updateScore();

  gameEl.innerHTML = '';
  for (let i = 0; i < totalCells; i++) {
    const cell = document.createElement('div');
    cell.className = 'cell';
    cell.addEventListener('click', () => {
      if (currentPlayer === 'user' && !resultShown) handleClick(i);
    });
    gameEl.appendChild(cell);
  }

  
  console.log('ê²Œì„ì— ë°°ì¹˜ëœ ë‹¨ì–´ë“¤:', words);
}

retryBtn.addEventListener('click', init);
window.addEventListener('resize', updateLayout);

function updateLayout() {
  const isMobile = window.innerWidth <= 768;
  if (isMobile) {
    npcScoreEl.style.display = 'none';
    userScoreEl.style.display = 'none';
    document.querySelector('.score-container').style.display = 'flex';
  } else {
    npcScoreEl.style.display = 'block';
    userScoreEl.style.display = 'block';
    document.querySelector('.score-container').style.display = 'none';
  }
}

updateLayout();
init();
</script>
</body>
</html>
